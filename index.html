<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Quest - 7th Grade Pre-Algebra Adventure</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Interactive 7th grade pre-algebra learning platform with step-by-step equation solving, video lessons, and student performance tracking. Florida B.E.S.T. standards aligned.">
    <meta name="keywords" content="7th grade math, pre-algebra, equation solving, math tutoring, algebra practice, student learning">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://7th-grade-pre-algebra.netlify.app/">
    <meta property="og:title" content="7th Grade Pre-Algebra Adventure - Interactive Learning">
    <meta property="og:description" content="Master equation solving through interactive lessons, step-by-step guidance, and gamified learning. Perfect for 7th grade students.">
    <meta property="og:image" content="https://7th-grade-pre-algebra.netlify.app/assets/images/social-share.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://7th-grade-pre-algebra.netlify.app/">
    <meta name="twitter:title" content="7th Grade Pre-Algebra Adventure">
    <meta name="twitter:description" content="Interactive equation solving with video lessons and step-by-step guidance for 7th grade students.">
    <meta name="twitter:image" content="https://7th-grade-pre-algebra.netlify.app/assets/images/social-share.png">

    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <!-- Main Container -->
    <div id="app">
        <!-- Header -->
        <header class="game-header">
            <div class="logo">
                <h1>üéÆ Equation Quest</h1>
                <p class="subtitle">Master Pre-Algebra Through Adventure!</p>
            </div>
            <div class="player-stats">
                <div class="stat-item">
                    <span class="stat-label">Level:</span>
                    <span class="stat-value" id="playerLevel">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">XP:</span>
                    <span class="stat-value" id="playerXP">0</span>
                    <span class="stat-max">/100</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Coins:</span>
                    <span class="stat-value" id="playerCoins">0</span>
                    <span class="coin-icon">ü™ô</span>
                </div>
            </div>
            <button class="btn-ai-tutor" id="copyToGeminiBtn">‚ú® Copy to Gemini</button>
        </header>

        <!-- Main Menu Screen -->
        <div id="menuScreen" class="screen active">
            <div class="menu-container">
                <div class="welcome-message">
                    <h2>7th Grade Pre-Algebra</h2>
                    <p class="standard-info">Florida Standard MA.8.AR.2.1 - Multi-Step Linear Equations</p>
                </div>

                <div class="why-this-matters">
                    <h3>üí° Why This Matters to YOU</h3>
                    <div class="real-world-examples">
                        <div class="example-card">
                            <div class="example-icon">üí∞</div>
                            <div class="example-text">
                                <strong>Managing Money:</strong> "I have $50. I spent some on lunch and now have $32. How much was lunch?" ‚Üí 50 - x = 32
                            </div>
                        </div>
                        <div class="example-card">
                            <div class="example-icon">üéÆ</div>
                            <div class="example-text">
                                <strong>Gaming & Coding:</strong> Game developers use equations to calculate damage, speed, and scores. Programming = solving equations constantly.
                            </div>
                        </div>
                        <div class="example-card">
                            <div class="example-icon">üì±</div>
                            <div class="example-text">
                                <strong>Phone Plans:</strong> "Which plan is cheaper? Plan A: $20 + $0.10/text or Plan B: $35 unlimited?" ‚Üí You need equations to compare.
                            </div>
                        </div>
                        <div class="example-card">
                            <div class="example-icon">üèÄ</div>
                            <div class="example-text">
                                <strong>Sports Stats:</strong> "I scored 18 points with 2-pointers and 3-pointers. How many of each?" ‚Üí 2x + 3y = 18
                            </div>
                        </div>
                    </div>
                    <p class="bottom-line"><strong>Bottom Line:</strong> Equations are how you figure out ANYTHING with unknown numbers. Every career that pays well uses this skill.</p>
                </div>

                <div class="workflow-instructions">
                    <div class="instruction-card primary-action">
                        <div class="step-badge">CONTINUE YOUR LEARNING</div>
                        <div class="current-level-display">
                            <div class="next-level-label">Up Next:</div>
                            <div class="level-info-display">
                                <span class="level-number-badge" id="displayLevelNum">Level 1</span>
                                <div class="level-details-display">
                                    <div class="level-title-display" id="displayLevelTitle">Two-Step Equations</div>
                                    <div class="level-world-display" id="displayLevelWorld">üè∞ Castle of Basics</div>
                                </div>
                            </div>
                        </div>
                        <button class="menu-btn primary large" id="startStoryBtn">
                            <span class="btn-icon">‚ñ∂Ô∏è</span>
                            <span class="btn-text">Start This Level</span>
                        </button>
                        <p class="instruction-text">
                            Each lesson: Video ‚Üí Examples ‚Üí Practice
                        </p>
                    </div>

                    <div class="secondary-options">
                        <div class="option-row">
                            <div class="option-card">
                                <div class="step-badge">STEP 2 - IF NEEDED</div>
                                <button class="menu-btn" id="tutorialBtn">
                                    <span class="btn-icon">üéì</span>
                                    <span class="btn-text">Watch Video Tutorials</span>
                                </button>
                                <p class="option-desc">Rewatch videos if you need help</p>
                            </div>

                            <div class="option-card">
                                <div class="step-badge">EXTRA PRACTICE</div>
                                <button class="menu-btn" id="practiceBtn">
                                    <span class="btn-icon">‚öîÔ∏è</span>
                                    <span class="btn-text">Practice Arena</span>
                                </button>
                                <p class="option-desc">Additional practice for concepts you've learned</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="progress-overview">
                    <h3>Your Progress</h3>
                    <div class="world-progress">
                        <div class="world-item" data-world="1">
                            <span class="world-icon">üè∞</span>
                            <span class="world-name">Castle of Basics</span>
                            <span class="world-status">0/5</span>
                        </div>
                        <div class="world-item" data-world="2">
                            <span class="world-icon">üå≤</span>
                            <span class="world-name">Forest of Distribution</span>
                            <span class="world-status">0/5</span>
                        </div>
                        <div class="world-item" data-world="3">
                            <span class="world-icon">‚õ∞Ô∏è</span>
                            <span class="world-name">Mountain of Both Sides</span>
                            <span class="world-status">0/5</span>
                        </div>
                        <div class="world-item" data-world="4">
                            <span class="world-icon">üåä</span>
                            <span class="world-name">Ocean of Fractions</span>
                            <span class="world-status">0/5</span>
                        </div>
                        <div class="world-item" data-world="5">
                            <span class="world-icon">üêâ</span>
                            <span class="world-name">Dragon's Lair (Final Boss)</span>
                            <span class="world-status">0/3</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tutorial Screen -->
        <div id="tutorialScreen" class="screen">
            <div class="tutorial-container">
                <button class="btn-back">‚Üê Back to Menu</button>
                <h2>üìö Video Tutorials</h2>

                <div class="tutorial-grid">
                    <div class="tutorial-card">
                        <h3>üéØ Two-Step Equations for Beginners</h3>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/0ackz7dJSYY"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                        </div>
                        <p class="tutorial-desc">Intro to Two-Step Equations - Perfect for beginners! (Math with Mr. J)</p>
                    </div>

                    <div class="tutorial-card">
                        <h3>üìö Grade 7: Two-Step Equations</h3>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/q3g68vcMXxM"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                        </div>
                        <p class="tutorial-desc">Solving Two-Step Equations - 7th Grade Level</p>
                    </div>

                    <div class="tutorial-card">
                        <h3>üéì Pre-Algebra BASICS</h3>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/viqI5rsMSyw"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                        </div>
                        <p class="tutorial-desc">Pre-Algebra Level Equations - Master the basics!</p>
                    </div>

                    <div class="tutorial-card">
                        <h3>‚öñÔ∏è Variables on Both Sides</h3>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/eZsyV0ISzV8"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                        </div>
                        <p class="tutorial-desc">Introduction to equations with variables on both sides</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Concept Introduction Screen -->
        <div id="conceptIntroScreen" class="screen">
            <div class="concept-intro-container">
                <button class="btn-back">‚Üê Back to Menu</button>

                <div class="concept-card">
                    <div class="concept-icon" id="conceptIcon">üéØ</div>
                    <h2 id="conceptTitle">New Concept: Two-Step Equations</h2>
                    <p id="conceptDescription">You're about to learn how to solve equations that require two steps!</p>

                    <div class="learning-path">
                        <h3>üìö Your Learning Path:</h3>
                        <div class="path-steps">
                            <div class="path-step" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>üìπ Watch Video</h4>
                                    <p>Learn the concept (3-5 min)</p>
                                </div>
                            </div>
                            <div class="path-step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>üëÄ See Examples</h4>
                                    <p>Watch step-by-step solutions</p>
                                </div>
                            </div>
                            <div class="path-step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>‚úçÔ∏è Try Problems</h4>
                                    <p>Practice with guidance</p>
                                </div>
                            </div>
                            <div class="path-step" data-step="4">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h4>‚úÖ Show Mastery</h4>
                                    <p>Get 4/5 correct to advance</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-actions">
                        <button class="btn-primary-large" id="watchVideoBtn">
                            üìπ Watch Video Tutorial (Required)
                        </button>
                        <p class="mandatory-notice">‚ö†Ô∏è You must watch the video before practicing</p>
                    </div>

                    <div class="concept-note">
                        <strong>üí° Learning Tip:</strong> Don't skip the video! It will make the problems much easier to understand.
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Lesson Screen -->
        <div id="videoLessonScreen" class="screen">
            <div class="video-lesson-container">
                <button class="btn-back">‚Üê Back</button>

                <div class="video-lesson-card">
                    <h2 id="videoLessonTitle">Video Lesson: Two-Step Equations</h2>
                    <p id="videoLessonDesc">Watch this video to understand the concept before practicing.</p>

                    <div class="main-video-container">
                        <iframe id="mainVideoFrame"
                                src=""
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>

                    <div class="video-notes">
                        <h3>üìù Key Points to Remember:</h3>
                        <ul id="keyPointsList">
                            <li>Work backwards: undo operations in reverse order</li>
                            <li>Always do the same operation to both sides</li>
                            <li>Simplify step by step</li>
                        </ul>
                    </div>

                    <div class="video-actions">
                        <label class="video-checkbox">
                            <input type="checkbox" id="videoWatchedCheck">
                            <span>‚úÖ I watched and understood the video</span>
                        </label>
                        <button class="btn-primary-large" id="continueToExamplesBtn" disabled>
                            Continue to Examples ‚Üí
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Examples Screen -->
        <div id="examplesScreen" class="screen">
            <div class="examples-container">
                <button class="btn-back">‚Üê Back</button>

                <div class="examples-card">
                    <h2>üëÄ Worked Examples</h2>
                    <p>Study these examples carefully. See how each step works.</p>

                    <div class="examples-grid" id="examplesGrid">
                        <!-- Examples will be loaded here -->
                    </div>

                    <div class="understanding-check">
                        <h3>ü§î Quick Understanding Check:</h3>
                        <p id="checkQuestion">What should you do first when solving 3x + 5 = 20?</p>
                        <div class="check-options">
                            <button class="check-option" data-correct="false">Divide by 3</button>
                            <button class="check-option" data-correct="true">Subtract 5 from both sides</button>
                            <button class="check-option" data-correct="false">Add 5 to both sides</button>
                        </div>
                        <div class="check-feedback" id="checkFeedback"></div>
                    </div>

                    <div class="examples-actions">
                        <button class="btn-primary-large" id="startPracticeBtn">
                            Ready to Practice! ‚Üí
                        </button>
                        <button class="btn-secondary-large" id="rewatchVideoBtn">
                            ‚Üê Rewatch Video
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-container">
                <button class="btn-back">‚Üê Back to Menu</button>

                <!-- Level Header -->
                <div class="level-header">
                    <div class="level-info">
                        <h2 id="levelTitle">Level 1: The First Challenge</h2>
                        <p id="levelDescription">Solve basic two-step equations</p>
                    </div>
                    <div class="level-stats">
                        <div class="streak">üî• Streak: <span id="streak">0</span></div>
                        <div class="mastery-display" id="masteryDisplay" style="display: none;">
                            <span class="mastery-label">üìä Mastery:</span>
                            <span class="mastery-value" id="masteryValue">0%</span>
                            <span class="difficulty-badge" id="difficultyBadge">Medium</span>
                        </div>
                    </div>
                </div>

                <!-- Main Game Area -->
                <div class="game-area">
                    <!-- 3D Visualization -->
                    <div class="visualization-panel">
                        <h3>‚öñÔ∏è Balance Visualization</h3>
                        <div id="threeContainer"></div>
                        <div class="viz-controls">
                            <button class="viz-btn" id="resetVizBtn">Reset View</button>
                            <button class="viz-btn" id="toggleVizBtn">Toggle Animation</button>
                        </div>
                    </div>

                    <!-- Equation Panel -->
                    <div class="equation-panel">
                        <div class="problem-header">
                            <div class="problem-number">
                                <span>Problem <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span></span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>

                        <!-- Word Problem Section -->
                        <div class="word-problem-section" id="wordProblemSection" style="display: none;">
                            <h3>üìñ Word Problem</h3>
                            <div class="word-problem-text" id="wordProblemText">
                                <!-- AI-generated word problem will appear here -->
                            </div>
                            <div class="word-problem-hint">
                                üí° Read carefully and figure out what equation to create!
                            </div>
                        </div>

                        <div class="current-equation">
                            <h3>Solve this equation:</h3>
                            <div class="equation-display" id="equationDisplay">
                                3x + 5 = 20
                            </div>
                        </div>

                        <div class="solving-method-notice">
                            <div class="notice-icon">üìù</div>
                            <div class="notice-text">
                                <strong>Show Your Work:</strong> Click below to solve this step-by-step. You'll answer questions and fill in calculations for each step.
                            </div>
                        </div>

                        <div class="primary-action-area">
                            <button class="btn-solve-steps" id="solveStepsBtn">
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                <span class="btn-text">Solve This Step-by-Step</span>
                            </button>
                        </div>

                        <!-- Step Solver Container (Modal) -->
                        <div class="step-solver-overlay" id="stepSolverContainer">
                            <!-- Interactive step solver will appear here -->
                        </div>

                        <div class="feedback-area" id="feedbackArea">
                            <!-- Feedback messages appear here -->
                        </div>
                    </div>
                </div>

                <!-- Level Progress -->
                <div class="level-progress">
                    <div class="progress-label">Level Progress</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="levelProgressFill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text"><span id="levelCurrentQuestion">0</span> / <span id="levelTotalQuestions">5</span> questions</div>
                </div>
            </div>
        </div>

        <!-- Practice Screen -->
        <div id="practiceScreen" class="screen">
            <div class="practice-container">
                <button class="btn-back">‚Üê Back to Menu</button>
                <h2>‚öîÔ∏è Practice Arena</h2>

                <div class="practice-options">
                    <div class="practice-card" data-type="basic">
                        <h3>üéØ Basic Equations</h3>
                        <p>Two-step equations: ax + b = c</p>
                        <button class="btn-practice">Start Practice</button>
                    </div>

                    <div class="practice-card" data-type="distributive">
                        <h3>üì¶ Distributive Property</h3>
                        <p>Equations with parentheses: a(x + b) = c</p>
                        <button class="btn-practice">Start Practice</button>
                    </div>

                    <div class="practice-card" data-type="both-sides">
                        <h3>‚öñÔ∏è Variables on Both Sides</h3>
                        <p>Equations: ax + b = cx + d</p>
                        <button class="btn-practice">Start Practice</button>
                    </div>

                    <div class="practice-card" data-type="complex">
                        <h3>üß† Complex Equations</h3>
                        <p>Multi-step with fractions and distribution</p>
                        <button class="btn-practice">Start Practice</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gemini Helper Modal -->
        <div id="geminiModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚ú® Gemini AI Helper</h2>
                    <button class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="gemini-info">
                        <p><strong>üìã Your equation context has been copied!</strong></p>
                        <p>Now you can paste it into Gemini (open next to this window) to get help with:</p>
                        <ul>
                            <li>Step-by-step explanations</li>
                            <li>Understanding concepts</li>
                            <li>Different solving strategies</li>
                            <li>Practice recommendations</li>
                        </ul>

                        <div class="copied-content" id="copiedContent">
                            <!-- Content that was copied will be shown here -->
                        </div>

                        <div class="gemini-actions">
                            <button class="btn-copy-again" id="copyAgainBtn">üìã Copy Again</button>
                            <a href="https://gemini.google.com/" target="_blank" class="btn-open-gemini">üîó Open Gemini</a>
                        </div>

                        <div class="quick-prompts">
                            <h3>Quick Prompts:</h3>
                            <button class="quick-prompt-btn" data-prompt="explain">Explain this concept</button>
                            <button class="quick-prompt-btn" data-prompt="steps">Show me the steps</button>
                            <button class="quick-prompt-btn" data-prompt="similar">Give me similar problems</button>
                            <button class="quick-prompt-btn" data-prompt="mistakes">What are common mistakes?</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="successModal" class="modal">
            <div class="modal-content success-content">
                <div class="celebration">üéâ</div>
                <h2>Amazing Work!</h2>
                <div class="rewards">
                    <p>You earned:</p>
                    <div class="reward-item">+<span id="earnedXP">50</span> XP</div>
                    <div class="reward-item">+<span id="earnedCoins">10</span> ü™ô</div>
                </div>
                <button class="btn-continue" id="continueBtn">Continue</button>
            </div>
        </div>

        <!-- Student Name Input Modal -->
        <div id="studentNameModal" class="modal" style="display: flex;">
            <div class="modal-content name-input-content">
                <div class="modal-icon">üëã</div>
                <h2>Welcome to Algebra Adventure!</h2>
                <p class="modal-subtitle">Let's get started. What's your name?</p>

                <div class="name-input-group">
                    <input type="text"
                           id="studentNameInput"
                           class="student-name-input"
                           placeholder="Enter your name"
                           autocomplete="off"
                           maxlength="50">
                </div>

                <button class="btn-primary name-submit-btn" id="submitNameBtn">
                    Start Learning! üöÄ
                </button>

                <p class="privacy-note">Your name will be used in your progress reports</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Environment variables (injected by Netlify build) -->
    <script src="env-inject.js"></script>
    <script src="js/core/equations.js"></script>
    <script src="js/features/animated-examples.js"></script>
    <script src="js/features/student-report.js"></script>
    <script src="js/features/adaptive-learning.js"></script>
    <script src="js/features/word-problem-generator.js"></script>
    <script src="js/utils/step-solver.js"></script>
    <script src="js/utils/ai-client.js"></script>
    <script src="js/features/learning-workflow.js"></script>
    <script src="js/features/standards-navigation.js"></script>
    <script src="js/core/game.js"></script>
    <script src="js/features/three-visualization.js"></script>
    <script src="js/utils/gemini-helper.js"></script>
</body>
</html>
