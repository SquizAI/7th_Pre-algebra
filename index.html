<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Quest - 7th Grade Pre-Algebra Adventure</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Interactive 7th grade pre-algebra learning platform with step-by-step equation solving, video lessons, and student performance tracking. Florida B.E.S.T. standards aligned.">
    <meta name="keywords" content="7th grade math, pre-algebra, equation solving, math tutoring, algebra practice, student learning">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://7th-grade-pre-algebra.netlify.app/">
    <meta property="og:title" content="7th Grade Pre-Algebra Adventure - Interactive Learning">
    <meta property="og:description" content="Master equation solving through interactive lessons, step-by-step guidance, and gamified learning. Perfect for 7th grade students.">
    <meta property="og:image" content="https://7th-grade-pre-algebra.netlify.app/assets/images/social-share.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://7th-grade-pre-algebra.netlify.app/">
    <meta name="twitter:title" content="7th Grade Pre-Algebra Adventure">
    <meta name="twitter:description" content="Interactive equation solving with video lessons and step-by-step guidance for 7th grade students.">
    <meta name="twitter:image" content="https://7th-grade-pre-algebra.netlify.app/assets/images/social-share.png">

    <!-- New Atomic CSS System -->
    <link rel="stylesheet" href="css/main.css">
    <!-- Legacy styles for backwards compatibility -->
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Main Container -->
    <div id="app">
        <!-- Header -->
        <header class="game-header" role="banner">
            <div class="logo">
                <h1>Equation Quest</h1>
                <p class="subtitle">Master Pre-Algebra Through Adventure!</p>
            </div>
            <div class="player-stats" aria-label="Player statistics">
                <div class="stat-item">
                    <span class="stat-label">Level:</span>
                    <span class="stat-value" id="playerLevel" aria-live="polite">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">XP:</span>
                    <span class="stat-value" id="playerXP" aria-live="polite">0</span>
                    <span class="stat-max">/100</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Coins:</span>
                    <span class="stat-value" id="playerCoins" aria-live="polite">0</span>
                    <span class="coin-icon" aria-hidden="true">ü™ô</span>
                </div>
            </div>
            <button class="btn-ai-tutor" id="copyToGeminiBtn" aria-label="Copy current progress to Gemini AI helper">
                <span aria-hidden="true">‚ú®</span> Copy to Gemini
            </button>
        </header>

        <!-- Main Content -->
        <main id="main-content" aria-label="Main content">
            <!-- Main Menu Screen -->
            <section id="menuScreen" class="screen active" aria-labelledby="menu-heading">
                <div class="menu-container">
                    <div class="welcome-message">
                        <h2 id="menu-heading">7th Grade Pre-Algebra</h2>
                        <p class="standard-info">Florida Standard MA.8.AR.2.1 - Multi-Step Linear Equations</p>
                    </div>

                    <section class="why-this-matters" aria-labelledby="why-matters-heading">
                        <h3 id="why-matters-heading"><span aria-hidden="true">üí°</span> Why This Matters to YOU</h3>
                        <div class="real-world-examples">
                            <article class="example-card">
                                <div class="example-icon" aria-hidden="true">üí∞</div>
                                <div class="example-text">
                                    <strong>Managing Money:</strong> "I have $50. I spent some on lunch and now have $32. How much was lunch?" ‚Üí 50 - x = 32
                                </div>
                            </article>
                            <article class="example-card">
                                <div class="example-icon" aria-hidden="true">üéÆ</div>
                                <div class="example-text">
                                    <strong>Gaming & Coding:</strong> Game developers use equations to calculate damage, speed, and scores. Programming = solving equations constantly.
                                </div>
                            </article>
                            <article class="example-card">
                                <div class="example-icon" aria-hidden="true">üì±</div>
                                <div class="example-text">
                                    <strong>Phone Plans:</strong> "Which plan is cheaper? Plan A: $20 + $0.10/text or Plan B: $35 unlimited?" ‚Üí You need equations to compare.
                                </div>
                            </article>
                            <article class="example-card">
                                <div class="example-icon" aria-hidden="true">üèÄ</div>
                                <div class="example-text">
                                    <strong>Sports Stats:</strong> "I scored 18 points with 2-pointers and 3-pointers. How many of each?" ‚Üí 2x + 3y = 18
                                </div>
                            </article>
                        </div>
                        <p class="bottom-line"><strong>Bottom Line:</strong> Equations are how you figure out ANYTHING with unknown numbers. Every career that pays well uses this skill.</p>
                    </section>

                    <section class="workflow-instructions" aria-labelledby="workflow-heading">
                        <h3 id="workflow-heading" class="sr-only">Learning Workflow</h3>
                        <div class="instruction-card primary-action">
                            <div class="step-badge">CONTINUE YOUR LEARNING</div>
                            <div class="current-level-display">
                                <div class="next-level-label">Up Next:</div>
                                <div class="level-info-display">
                                    <span class="level-number-badge" id="displayLevelNum">Level 1</span>
                                    <div class="level-details-display">
                                        <div class="level-title-display" id="displayLevelTitle">Two-Step Equations</div>
                                        <div class="level-world-display" id="displayLevelWorld"><span aria-hidden="true">üè∞</span> Castle of Basics</div>
                                    </div>
                                </div>
                            </div>
                            <button class="menu-btn primary large" id="startStoryBtn" aria-label="Start current level">
                                <span class="btn-icon" aria-hidden="true">‚ñ∂Ô∏è</span>
                                <span class="btn-text">Start This Level</span>
                            </button>
                            <p class="instruction-text">
                                Each lesson: Video ‚Üí Examples ‚Üí Practice
                            </p>
                        </div>

                        <div class="secondary-options">
                            <div class="option-row">
                                <div class="option-card">
                                    <div class="step-badge">STEP 2 - IF NEEDED</div>
                                    <button class="menu-btn" id="tutorialBtn" aria-label="Watch video tutorials">
                                        <span class="btn-icon" aria-hidden="true">üéì</span>
                                        <span class="btn-text">Watch Video Tutorials</span>
                                    </button>
                                    <p class="option-desc">Rewatch videos if you need help</p>
                                </div>

                                <div class="option-card">
                                    <div class="step-badge">EXTRA PRACTICE</div>
                                    <button class="menu-btn" id="practiceBtn" aria-label="Go to practice arena">
                                        <span class="btn-icon" aria-hidden="true">‚öîÔ∏è</span>
                                        <span class="btn-text">Practice Arena</span>
                                    </button>
                                    <p class="option-desc">Additional practice for concepts you've learned</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="progress-overview" aria-labelledby="progress-heading">
                        <h3 id="progress-heading">Your Progress</h3>
                        <ul class="world-progress">
                            <li class="world-item" data-world="1">
                                <span class="world-icon" aria-hidden="true">üè∞</span>
                                <span class="world-name">Castle of Basics</span>
                                <span class="world-status">0/5</span>
                            </li>
                            <li class="world-item" data-world="2">
                                <span class="world-icon" aria-hidden="true">üå≤</span>
                                <span class="world-name">Forest of Distribution</span>
                                <span class="world-status">0/5</span>
                            </li>
                            <li class="world-item" data-world="3">
                                <span class="world-icon" aria-hidden="true">‚õ∞Ô∏è</span>
                                <span class="world-name">Mountain of Both Sides</span>
                                <span class="world-status">0/5</span>
                            </li>
                            <li class="world-item" data-world="4">
                                <span class="world-icon" aria-hidden="true">üåä</span>
                                <span class="world-name">Ocean of Fractions</span>
                                <span class="world-status">0/5</span>
                            </li>
                            <li class="world-item" data-world="5">
                                <span class="world-icon" aria-hidden="true">üêâ</span>
                                <span class="world-name">Dragon's Lair (Final Boss)</span>
                                <span class="world-status">0/3</span>
                            </li>
                        </ul>
                    </section>
                </div>
            </section>

            <!-- Tutorial Screen -->
            <section id="tutorialScreen" class="screen" aria-labelledby="tutorial-heading">
                <div class="tutorial-container">
                    <button class="btn btn-md btn-ghost" onclick="window.gameController.showScreen('menu')" aria-label="Back to menu">
                        <span aria-hidden="true">‚Üê</span> Back to Menu
                    </button>
                    <h2 id="tutorial-heading"><span aria-hidden="true">üìö</span> Video Tutorials</h2>

                    <div class="tutorial-grid grid grid-cols-2 flex-wrap">
                        <article class="tutorial-card card card-interactive">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">üéØ</span> Two-Step Equations for Beginners</h3>
                            </div>
                            <div class="card__body">
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/0ackz7dJSYY"
                                            title="Two-Step Equations for Beginners"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="card__footer">
                                <p class="tutorial-desc">Intro to Two-Step Equations - Perfect for beginners! (Math with Mr. J)</p>
                            </div>
                        </article>

                        <article class="tutorial-card card card-interactive">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">üìö</span> Grade 7: Two-Step Equations</h3>
                            </div>
                            <div class="card__body">
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/q3g68vcMXxM"
                                            title="Grade 7: Two-Step Equations"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="card__footer">
                                <p class="tutorial-desc">Solving Two-Step Equations - 7th Grade Level</p>
                            </div>
                        </article>

                        <article class="tutorial-card card card-interactive">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">üéì</span> Pre-Algebra BASICS</h3>
                            </div>
                            <div class="card__body">
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/viqI5rsMSyw"
                                            title="Pre-Algebra BASICS"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="card__footer">
                                <p class="tutorial-desc">Pre-Algebra Level Equations - Master the basics!</p>
                            </div>
                        </article>

                        <article class="tutorial-card card card-interactive">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">‚öñÔ∏è</span> Variables on Both Sides</h3>
                            </div>
                            <div class="card__body">
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/eZsyV0ISzV8"
                                            title="Variables on Both Sides"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="card__footer">
                                <p class="tutorial-desc">Introduction to equations with variables on both sides</p>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <!-- Concept Introduction Screen -->
            <section id="conceptIntroScreen" class="screen" aria-labelledby="conceptTitle">
                <div class="concept-intro-container">
                    <button class="btn-back" aria-label="Back to menu">‚Üê Back to Menu</button>

                    <article class="concept-card">
                        <div class="concept-icon" id="conceptIcon" aria-hidden="true">üéØ</div>
                        <h2 id="conceptTitle">New Concept: Two-Step Equations</h2>
                        <p id="conceptDescription">You're about to learn how to solve equations that require two steps!</p>

                        <div class="learning-path">
                            <h3><span aria-hidden="true">üìö</span> Your Learning Path:</h3>
                            <ol class="path-steps">
                                <li class="path-step" data-step="1">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4><span aria-hidden="true">üìπ</span> Watch Video</h4>
                                        <p>Learn the concept (3-5 min)</p>
                                    </div>
                                </li>
                                <li class="path-step" data-step="2">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4><span aria-hidden="true">üëÄ</span> See Examples</h4>
                                        <p>Watch step-by-step solutions</p>
                                    </div>
                                </li>
                                <li class="path-step" data-step="3">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4><span aria-hidden="true">‚úçÔ∏è</span> Try Problems</h4>
                                        <p>Practice with guidance</p>
                                    </div>
                                </li>
                                <li class="path-step" data-step="4">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h4><span aria-hidden="true">‚úÖ</span> Show Mastery</h4>
                                        <p>Get 4/5 correct to advance</p>
                                    </div>
                                </li>
                            </ol>
                        </div>

                        <div class="concept-actions">
                            <button class="btn-primary-large" id="watchVideoBtn" aria-label="Watch video tutorial - required before practicing">
                                <span aria-hidden="true">üìπ</span> Watch Video Tutorial (Required)
                            </button>
                            <p class="mandatory-notice" role="alert"><span aria-hidden="true">‚ö†Ô∏è</span> You must watch the video before practicing</p>
                        </div>

                        <div class="concept-note">
                            <strong><span aria-hidden="true">üí°</span> Learning Tip:</strong> Don't skip the video! It will make the problems much easier to understand.
                        </div>
                    </article>
                </div>
            </section>

            <!-- Video Lesson Screen -->
            <section id="videoLessonScreen" class="screen" aria-labelledby="videoLessonTitle">
                <div class="video-lesson-container">
                    <button class="btn-back" aria-label="Go back">‚Üê Back</button>

                    <article class="video-lesson-card">
                        <h2 id="videoLessonTitle">Video Lesson: Two-Step Equations</h2>
                        <p id="videoLessonDesc">Watch this video to understand the concept before practicing.</p>

                        <div class="main-video-container">
                            <iframe id="mainVideoFrame"
                                    src=""
                                    title="Main video lesson"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                        </div>

                        <div class="video-notes">
                            <h3><span aria-hidden="true">üìù</span> Key Points to Remember:</h3>
                            <ul id="keyPointsList">
                                <li>Work backwards: undo operations in reverse order</li>
                                <li>Always do the same operation to both sides</li>
                                <li>Simplify step by step</li>
                            </ul>
                        </div>

                        <div class="video-actions">
                            <label class="video-checkbox">
                                <input type="checkbox" id="videoWatchedCheck" aria-describedby="video-checkbox-label">
                                <span id="video-checkbox-label"><span aria-hidden="true">‚úÖ</span> I watched and understood the video</span>
                            </label>
                            <button class="btn-primary-large" id="continueToExamplesBtn" disabled aria-label="Continue to examples - enabled after confirming video watched">
                                Continue to Examples ‚Üí
                            </button>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Examples Screen -->
            <section id="examplesScreen" class="screen" aria-labelledby="examples-heading">
                <div class="examples-container">
                    <button class="btn btn-md btn-ghost" aria-label="Go back to previous screen">‚Üê Back</button>

                    <article class="card">
                        <header class="card__header">
                            <h2 id="examples-heading" class="card__title"><span aria-hidden="true">üëÄ</span> Worked Examples</h2>
                            <p class="card__subtitle">Study these examples carefully. See how each step works.</p>
                        </header>

                        <div class="card__body">
                            <div class="examples-grid" id="examplesGrid" role="list" aria-label="Example problems with step-by-step solutions" aria-live="polite">
                                <!-- Examples will be loaded here dynamically -->
                            </div>

                            <div class="understanding-check card" style="margin-top: var(--space-6);">
                                <div class="card__header">
                                    <h3 class="card__title"><span aria-hidden="true">ü§î</span> Quick Understanding Check</h3>
                                </div>
                                <div class="card__body">
                                    <p id="checkQuestion" class="question-text">What should you do first when solving 3x + 5 = 20?</p>
                                    <div class="check-options" role="group" aria-labelledby="checkQuestion">
                                        <button class="btn btn-md btn-secondary" data-correct="false" aria-label="Option A: Divide by 3">
                                            Divide by 3
                                        </button>
                                        <button class="btn btn-md btn-secondary" data-correct="true" aria-label="Option B: Subtract 5 from both sides (correct answer)">
                                            Subtract 5 from both sides
                                        </button>
                                        <button class="btn btn-md btn-secondary" data-correct="false" aria-label="Option C: Add 5 to both sides">
                                            Add 5 to both sides
                                        </button>
                                    </div>
                                    <div class="check-feedback" id="checkFeedback" role="status" aria-live="polite" aria-atomic="true"></div>
                                </div>
                            </div>
                        </div>

                        <footer class="card__footer">
                            <button class="btn btn-lg btn-primary" id="startPracticeBtn" aria-label="Start practicing problems">
                                <span aria-hidden="true">‚úçÔ∏è</span> Ready to Practice!
                            </button>
                            <button class="btn btn-md btn-secondary" id="rewatchVideoBtn" aria-label="Rewatch video lesson">
                                <span aria-hidden="true">üìπ</span> Rewatch Video
                            </button>
                        </footer>
                    </article>
                </div>
            </section>

            <!-- Game Screen -->
            <section id="gameScreen" class="screen" aria-labelledby="game-heading">
                <div class="game-container">
                    <button class="btn btn-md btn-secondary" aria-label="Back to menu">
                        <span aria-hidden="true">‚Üê</span> Back to Menu
                    </button>

                    <!-- Level Header -->
                    <header class="level-header">
                        <div class="level-info">
                            <h2 id="game-heading">Level 1: The First Challenge</h2>
                            <p id="levelDescription" class="card__subtitle">Solve basic two-step equations</p>
                        </div>
                        <div class="level-stats" aria-label="Level statistics">
                            <div class="streak">
                                <span aria-hidden="true">üî•</span> Streak:
                                <output id="streak" aria-live="polite">0</output>
                            </div>
                            <div class="mastery-display" id="masteryDisplay" style="display: none;">
                                <span class="mastery-label"><span aria-hidden="true">üìä</span> Mastery:</span>
                                <output class="mastery-value" id="masteryValue" aria-live="polite">0%</output>
                                <span class="difficulty-badge" id="difficultyBadge" role="status">Medium</span>
                            </div>
                        </div>
                    </header>

                    <!-- Main Game Area -->
                    <div class="game-area">
                        <!-- 3D Visualization -->
                        <aside class="visualization-panel card" aria-label="Balance scale visualization">
                            <h3 class="card__title"><span aria-hidden="true">‚öñÔ∏è</span> Balance Visualization</h3>
                            <div id="threeContainer" role="img" aria-label="3D visualization of equation balance"></div>
                            <div class="viz-controls">
                                <button class="btn btn-sm btn-ghost" id="resetVizBtn" aria-label="Reset visualization view">
                                    <span aria-hidden="true">‚Ü∫</span> Reset View
                                </button>
                                <button class="btn btn-sm btn-ghost" id="toggleVizBtn" aria-label="Toggle visualization animation">
                                    <span aria-hidden="true">‚ñ∂</span> Toggle Animation
                                </button>
                            </div>
                        </aside>

                        <!-- Equation Panel -->
                        <article class="equation-panel card">
                            <div class="problem-header card__header">
                                <div class="problem-number">
                                    <span>Problem <output id="currentQuestion">1</output> of <output id="totalQuestions">10</output></span>
                                </div>
                                <progress class="progress-bar"
                                         id="problemProgress"
                                         value="0"
                                         max="100"
                                         aria-label="Problem progress">
                                    <div class="progress-fill" id="progressFill"></div>
                                </progress>
                            </div>

                            <!-- Word Problem Section -->
                            <div class="word-problem-section card" id="wordProblemSection" style="display: none;">
                                <h3 class="card__title"><span aria-hidden="true">üìñ</span> Word Problem</h3>
                                <div class="word-problem-text card__body" id="wordProblemText" role="article">
                                    <!-- AI-generated word problem will appear here -->
                                </div>
                                <div class="word-problem-hint" role="note">
                                    <span aria-hidden="true">üí°</span> Read carefully and figure out what equation to create!
                                </div>
                            </div>

                            <div class="current-equation card__body">
                                <h3>Solve this equation:</h3>
                                <output class="equation-display"
                                       id="equationDisplay"
                                       role="math"
                                       aria-live="polite"
                                       aria-atomic="true"
                                       aria-label="Current equation to solve">
                                    3x + 5 = 20
                                </output>
                            </div>

                            <div class="solving-method-notice card" role="note">
                                <div class="notice-icon" aria-hidden="true">üìù</div>
                                <div class="notice-text">
                                    <strong>Show Your Work:</strong> Click below to solve this step-by-step. You'll answer questions and fill in calculations for each step.
                                </div>
                            </div>

                            <div class="primary-action-area">
                                <button class="btn btn-lg btn-primary" id="solveStepsBtn" aria-label="Start step-by-step solution">
                                    <span aria-hidden="true">‚ñ∂Ô∏è</span>
                                    Solve This Step-by-Step
                                </button>
                            </div>

                            <!-- Step Solver Container (Modal) -->
                            <div class="step-solver-overlay"
                                 id="stepSolverContainer"
                                 role="dialog"
                                 aria-modal="true"
                                 aria-labelledby="step-solver-title"
                                 aria-hidden="true">
                                <!-- Interactive step solver will appear here -->
                            </div>

                            <div class="feedback-area card"
                                 id="feedbackArea"
                                 role="status"
                                 aria-live="polite"
                                 aria-atomic="true">
                                <!-- Feedback messages appear here -->
                            </div>
                        </article>
                    </div>

                    <!-- Level Progress -->
                    <footer class="level-progress">
                        <div class="progress-label">Level Progress</div>
                        <progress class="progress-bar"
                                 id="levelProgress"
                                 value="0"
                                 max="100"
                                 aria-label="Level completion progress">
                            <div class="progress-fill" id="levelProgressFill" style="width: 0%"></div>
                        </progress>
                        <output class="progress-text" aria-live="polite">
                            <span id="levelCurrentQuestion">0</span> / <span id="levelTotalQuestions">5</span> questions
                        </output>
                    </footer>
                </div>
            </section>

            <!-- Practice Screen -->
            <section id="practiceScreen" class="screen" aria-labelledby="practice-heading">
                <div class="practice-container">
                    <button class="btn btn-md btn-secondary" aria-label="Back to menu">
                        <span aria-hidden="true">‚Üê</span> Back to Menu
                    </button>
                    <h2 id="practice-heading"><span aria-hidden="true">‚öîÔ∏è</span> Practice Arena</h2>

                    <div class="practice-options card-grid">
                        <article class="practice-card card card-interactive" data-type="basic">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">üéØ</span> Basic Equations</h3>
                            </div>
                            <div class="card__body">
                                <p>Two-step equations: ax + b = c</p>
                            </div>
                            <div class="card__footer">
                                <button class="btn btn-md btn-primary" aria-label="Start basic equations practice">
                                    <span aria-hidden="true">‚ñ∂</span> Start Practice
                                </button>
                            </div>
                        </article>

                        <article class="practice-card card card-interactive" data-type="distributive">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">üì¶</span> Distributive Property</h3>
                            </div>
                            <div class="card__body">
                                <p>Equations with parentheses: a(x + b) = c</p>
                            </div>
                            <div class="card__footer">
                                <button class="btn btn-md btn-primary" aria-label="Start distributive property practice">
                                    <span aria-hidden="true">‚ñ∂</span> Start Practice
                                </button>
                            </div>
                        </article>

                        <article class="practice-card card card-interactive" data-type="both-sides">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">‚öñÔ∏è</span> Variables on Both Sides</h3>
                            </div>
                            <div class="card__body">
                                <p>Equations: ax + b = cx + d</p>
                            </div>
                            <div class="card__footer">
                                <button class="btn btn-md btn-primary" aria-label="Start variables on both sides practice">
                                    <span aria-hidden="true">‚ñ∂</span> Start Practice
                                </button>
                            </div>
                        </article>

                        <article class="practice-card card card-interactive" data-type="complex">
                            <div class="card__header">
                                <h3 class="card__title"><span aria-hidden="true">üß†</span> Complex Equations</h3>
                            </div>
                            <div class="card__body">
                                <p>Multi-step with fractions and distribution</p>
                            </div>
                            <div class="card__footer">
                                <button class="btn btn-md btn-primary" aria-label="Start complex equations practice">
                                    <span aria-hidden="true">‚ñ∂</span> Start Practice
                                </button>
                            </div>
                        </article>
                    </div>
                </div>
            </section>
        </main>

        <!-- Gemini Helper Modal -->
        <div id="geminiModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="gemini-modal-title">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="gemini-modal-title"><span aria-hidden="true">‚ú®</span> Gemini AI Helper</h2>
                    <button class="btn-close" aria-label="Close modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="gemini-info">
                        <p><strong><span aria-hidden="true">üìã</span> Your equation context has been copied!</strong></p>
                        <p>Now you can paste it into Gemini (open next to this window) to get help with:</p>
                        <ul>
                            <li>Step-by-step explanations</li>
                            <li>Understanding concepts</li>
                            <li>Different solving strategies</li>
                            <li>Practice recommendations</li>
                        </ul>

                        <div class="copied-content" id="copiedContent">
                            <!-- Content that was copied will be shown here -->
                        </div>

                        <div class="gemini-actions">
                            <button class="btn-copy-again" id="copyAgainBtn" aria-label="Copy to clipboard again"><span aria-hidden="true">üìã</span> Copy Again</button>
                            <a href="https://gemini.google.com/" target="_blank" rel="noopener noreferrer" class="btn-open-gemini" aria-label="Open Gemini in new tab"><span aria-hidden="true">üîó</span> Open Gemini</a>
                        </div>

                        <div class="quick-prompts">
                            <h3>Quick Prompts:</h3>
                            <button class="quick-prompt-btn" data-prompt="explain" aria-label="Copy 'Explain this concept' prompt">Explain this concept</button>
                            <button class="quick-prompt-btn" data-prompt="steps" aria-label="Copy 'Show me the steps' prompt">Show me the steps</button>
                            <button class="quick-prompt-btn" data-prompt="similar" aria-label="Copy 'Give me similar problems' prompt">Give me similar problems</button>
                            <button class="quick-prompt-btn" data-prompt="mistakes" aria-label="Copy 'What are common mistakes' prompt">What are common mistakes?</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="successModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="success-modal-title">
            <div class="modal-content success-content">
                <div class="celebration" aria-hidden="true">üéâ</div>
                <h2 id="success-modal-title">Amazing Work!</h2>
                <div class="rewards">
                    <p>You earned:</p>
                    <div class="reward-item">+<span id="earnedXP">50</span> XP</div>
                    <div class="reward-item">+<span id="earnedCoins">10</span> <span aria-hidden="true">ü™ô</span></div>
                </div>
                <button class="btn-continue" id="continueBtn" aria-label="Continue to next level">Continue</button>
            </div>
        </div>

        <!-- Student Name Input Modal -->
        <div id="studentNameModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="name-modal-title" style="display: flex;">
            <div class="modal-content name-input-content">
                <div class="modal-icon" aria-hidden="true">üëã</div>
                <h2 id="name-modal-title">Welcome to Algebra Adventure!</h2>
                <p class="modal-subtitle">Let's get started. What's your name?</p>

                <div class="name-input-group">
                    <label for="studentNameInput" class="sr-only">Enter your name</label>
                    <input type="text"
                           id="studentNameInput"
                           class="student-name-input"
                           placeholder="Enter your name"
                           autocomplete="off"
                           maxlength="50"
                           aria-required="true">
                </div>

                <button class="btn-primary name-submit-btn" id="submitNameBtn" aria-label="Submit name and start learning">
                    Start Learning! <span aria-hidden="true">üöÄ</span>
                </button>

                <p class="privacy-note">Your name will be used in your progress reports</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Environment variables (injected by Netlify build) -->
    <script src="env-inject.js"></script>
    <script src="js/core/equations.js"></script>
    <script src="js/features/animated-examples.js"></script>
    <script src="js/features/student-report.js"></script>
    <script src="js/features/adaptive-learning.js"></script>
    <script src="js/features/word-problem-generator.js"></script>
    <script src="js/utils/step-solver.js"></script>
    <script src="js/utils/ai-client.js"></script>
    <script src="js/features/learning-workflow.js"></script>
    <script src="js/features/standards-navigation.js"></script>
    <!-- NEW: Date-based navigation system -->
    <script src="js/config/schedule.js"></script>
    <script src="js/features/lesson-scheduler.js"></script>
    <script src="js/features/date-navigation.js"></script>
    <!-- Must load after schedule files -->
    <script src="js/core/game.js"></script>
    <script src="js/features/three-visualization.js"></script>
    <script src="js/utils/gemini-helper.js"></script>
</body>
</html>
